\chapter{Anleitung zur \LaTeX-Vorlage}

\lettrine[nindent=0.2em]{H}{erzlich Willkommen} zur \LaTeX-Vorlage des IES. Wir freuen uns, dass Sie sich für diese Vorlage entschieden haben, denn damit bringen Sie zum Ausdruck, dass hochwertige Druckerzeugnisse für Sie von Belang sind.

Diese Vorlage basiert in ihren Grundzügen auf der exzellenten \enquote{allgemeinen sehr umfassenden} Vorlage von Matthias Pospiech (\url{http://www.matthiaspospiech.de/latex/vorlagen/}). Ohne diese Basis wäre die Vorlage niemals das geworden, was sie ist. Vielen~Dank!

\section{Voraussetzungen}

Zunächst eine Liste der technischen Voraussetzungen um diese Vorlage nutzen zu können.

\begin{itemize}
	\item Windows-PC mit \LaTeX-Distribution (Getestet ist Win XP SP3 und Win 7 64-bit jeweils mit MikTeX\footnote{\url{http://www.miktex.org/}} 2.9)
	\item Internetanschluss zum dynamischen Nachladen der Pakete
	\item \LaTeX-Entwicklungsumgebung wie \zb TeXnicCenter\footnote{\url{http://www.texniccenter.org/resources/downloads/29}} (TXC), Winshell\footnote{\url{http://www.winshell.org/modules/ws_download/}}, WinEdt\footnote{\url{http://www.winedt.com/}} (Shareware)
	\item Sync\TeX-fähigen PDF-Viewer wie \zb SumatraPDF\footnote{\url{http://blog.kowalczyk.info/software/sumatrapdf/download.html}}
	\item Ghostscript (bei MikTeX schon dabei)
	\item Optional: Perl-Installation
\end{itemize}

Die Vorlage ist speziell für Windows angepasst und auch nur dort getestet, sollte aber auch außerhalb von Windows funktionieren.

\subsection{Mik\TeX-Einstellungen}
Bitte stellen Sie bei Mik\TeX ein, dass Pakete ohne Nachfrage vom Internet nachgeladen werden. Dies geschieht entweder bei der Installation oder ist zu finden im Startmenü unter MikTeX, Maintenance (Admin), Settings (Admin), General, Package installation, Install missing packages on the fly: Yes. Wird dies versäumt kann das zu Fehlermeldungen im TXC führen (\enquote{GUI framework cannot be initialized}, v.a. bei älteren MikTeX-Installationen). Bekommt man trotzdem noch diese Fehlermeldung kann man in der pdf\LaTeX-Befehlszeile noch \texttt{--enable-installer} hinzufügen, was Vorrang vor der Mik\TeX-Option hat. Hilft das auch nicht, kann man noch die aktuelle Alphaversion vom TeXnicCenter probieren oder Mik\TeX mal neu installieren.

Am IOSB muss man fürs Mik\TeX-Update auch einen Proxyserver einstellen:\\
 \texttt{mca-01.iosb.fraunhofer.de} mit Port \texttt{3128}\\
Wird das nicht gemacht, können benötigte Pakete nicht nachgeladen werden.

Nach der Mik\TeX-Installation sollte man im Startmenü gleich \texttt{Update (Admin)} aufrufen, den Proxy eintragen und das Update machen lassen.

\subsubsection{Schriftart Libertine}

Inzwischen wurde bei Mik\TeX einiges umgestellt, was zur Folge hat, dass es Probleme mit der Schrift Libertine geben kann, die in der Vorlage für die Überschriften verwendet wird.

Hintergrund ist der, dass das Libertine-Paket inzwischen nur noch Schriften im OTF-Format enthält und daher wird in der Fehlermeldung auch empfohlen, das (neue) Paket
\texttt{libertineotf} zu verwenden.

Dieser Hinweis hilft aber nur dann, wenn man mit XeTeX oder LuaTeX arbeitet, was von uns aber glaube ich niemand tut. Für die normalen pdfTeX-Anwender gibt es inzwischen Abhilfe durch das Paket \texttt{libertine-legacy}. Zumindest unter MikTeX gibt es da aber Schwierigkeiten bei der Umstellung, weil MikTeX automatisch das (inzwischen) nicht mehr geeignete \texttt{libertine} Paket auf der Suche nach der Schrift nachlädt (wenn die Auto-Updates an sind) aber in dem Paket nicht das Richtige findet.

LaTeX-Guru Ulrike Fischer hat aber eine Lösung für uns parat:

\begin{quotation}
Wenn du pdflatex benutzt, solltest du im tex/latex/libertine-Ordner die Datei libertine.sty umbenennen oder löschen, danach installiere das Paket libertine-legacy. Eventuell musst du danach noch die FNDB als User+Admin aktualisieren. Achte bei ersten Tests darauf, dass on-the-fly-Installation abgeschaltet ist, damit miktex nicht wieder die libertine.sty im libertine-Ordner neu installiert, sondern die in libertine-legacy nützt.
\end{quotation}

Ergänzungen dazu von meiner Seite:

\begin{enumerate}
	\item Der genannte tex/latex/libertine-Ordner muss nicht der Order in \enquote{Program Files} sein, es wird oft der Ordner in den Benutzerdaten sein (manchmal gibt es das \texttt{libertine}-Paket vielleicht auch in beiden Ordnern):\\
	Unter XP sowas wie:\\
	{\tiny \verb+C:\Dokumente und Einstellungen\[username]\Anwendungsdaten\MiKTeX\2.9\tex\latex\+ }\\
	Unter Win7 ist es dann glaub so:\\
	{\scriptsize \verb+C:\user\[username]\Roaming\AppData\MiKTeX\2.9\tex\latex\+} \\
	(Ich bin mir nicht sicher, ob nur das Roaming-Profil betroffen ist oder auch das Local-Profil. Im Zweifel nach den libertine-Dateien suchen)\\
	
	\item Ulrike Fischer sagt \enquote{eventuell die FNDB updaten}. Nicht eventuell, sondern macht das! Startmenü, Maintenance, Settings, einmal als Admin und einmal nicht.
	\item Den Ordner \enquote{libertine} (in dem die \texttt{libertine.sty} enthalten ist) \emph{umzubenennen} hilft nichts, das FNDB-Update findet die \texttt{libertine.sty} trotzdem.
	\item In der Vorlage heißt es nach wie vor \verb+\usepackage{libertine}+, NICHT \verb+\usepackage{libertine-legacy}+! Mit dem legacy-Paket wird die Schrift installiert und dann wird sie auch gefunden.
	\item Wenn die Kompilation dann geklappt hat, kann man die Auto-Updates in MikTeX wieder an machen.
\end{enumerate}



\subsection{SumatraPDF}
In SumatraPDF selbst muss nichts eingestellt werden. SumatraPDF ist von Haus aus Sync\TeX-fähig. Das bedeutet, dass man (im Zusammenspiel mit den von pdf\LaTeX\ erzeugten Sync\TeX-Informationen) durch Doppelklick an einer beliebigen Stelle im PDF-Dokument zum zugehörigen \LaTeX-Codeblock im TXC springen kann. Umgekehrt springt SumatraPDF durch Drücken von F5 im TXC an die nächstgelegene Stelle im PDF. Besonders im Zwei-Monitor-Betrieb kann man so bequem Korrekturlesen und gleich die entsprechenden Teile im Code korrigieren.

\subsection{TeXnicCenter-Einstellungen}
Vorab: Die hier genannten Aussagen gelten gleichsam für TXC 1{.}0RC1, die derzeit (August 2012) als stabil deklarierte Version von TXC. In der aktuellen Alpha4-Version von TXC 2{.}0 sehen viele Einstellungsdialoge aber identisch oder zumindest sehr ähnlich aus, so dass das Vorgehen ganz ähnlich mit nur kleinen Transferleistungen zu bewerkstelligen ist.

\subsubsection{TXC Alphaversion und Windows 7}
Unter Windows 7 (insbesondere den 64-bit-Versionen) scheint TXC 1{.}0RC1 nicht zuverlässig zu funktionieren, was das automatische Nachladen der Pakete betrifft. Auch die Inverssuche mit SumatraPDF scheint nicht reibungslos zu klappen. Daher der Hinweis, speziell unter Windows 7 die Alphaversion von TXC zu verwenden, die in meinen persönlichen Tests genauso stabil ist wie die Version 1{.}0RC1. Auch unter Windows XP läuft die Alphaversion sehr gut und ich ziehe sie der 1{.}0RC1 vor.

\subsubsection{Ausgabeprofile}
TeXnicCenter verwaltet den \LaTeX-Kompiliervorgang über sogenannte Ausgabeprofile. Dort wird festgelegt, mit welchen Parametern der pdf\LaTeX/pdf\TeX-Lauf, der Bib\TeX-Aufruf und der Aufruf des PDF-Viewers gestartet wird. Die folgenden Einstellungen gelten für SumatraPDF als Viewer.

Zuerst erstellt man sich zwei neue Ausgabeprofile: Eines für Einzeldokumente (eine \texttt{*.tex}-Datei für alles) und eines für TXC-Projekte (eine Hauptdatei, die andere \texttt{*.tex}-Dateien aufruft). Braucht man unterteilte Literaturverzeichnisse wird am besten noch ein drittes Profil angelegt, dazu später mehr.
Zu finden ist die Option im Menü: Ausgabe, Ausgabeprofile definieren (Alt+F7), Hinzufügen. Diesen Profilen gibt man beliebige aber sinnvolle Namen wie \zb \enquote{Sumatra EinzelTeX} oder \enquote{Sumatra Projekt} (oder \enquote{Sumatra Multi Literatur}). Die beiden Profile werden sich später nur um wenige Details unterscheiden, aber das reicht ja schon.

\paragraph{pdf\LaTeX} Pfad zu pdf\LaTeX: An die jeweilige Installation anpassen. Die Argumente für den Compiler sind:\\ {\tiny \verb+-synctex=-1 -interaction=nonstopmode -max-print-line=120 "%pm" --enable-write18+}\\
Die Optionen bedeuten, dass Sync\TeX-Informationen erzeugt werden sollen, dass der pdf\LaTeX-Lauf nicht mit Nachfragen an den Nutzer stoppt, erlaubt Compileausgaben bis 120 Zeichen pro Zeile und erlaubt \emph{Shell-Escape} (write18). Das ist eine besonders wichtige Option, denn ohne ihn können weder EPS-Grafiken oder psfrag verwendet werden noch können PDF-Grafiken automatisch zugeschnitten (gecroppt) werden.

\paragraph{Bib\TeX}
Verwendet man nur ein Literaturverzeichnis, muss man bei den Einstellungen zum Bib\TeX-Compiler nichts besonderes beachten: Den Pfad ggf. anpassen und als Argument nur \verb+"%bm"+.

Bei Problemen mit Bib\TeX\ was das Encoding angeht (Umlaute, Sonderzeichen), kann es helfen, die \texttt{bibtex8.exe} zu verwenden. Hintergrund: Bib\TeX\ stammt aus einer Zeit als 7-bit-Zeichensätze (ASCII) gängig waren. BibTeX8 erweitert das auf 8-bit-Zeichensätze. Evtl.\ ändert sich die Sortierreihenfolge der Einträge dadurch. Das Argument im TeXnicCenter lautet dann aber nicht mehr \verb+"%bm"+ sondern \verb+"%tm"+.

\paragraph{Bib\TeX mit mehreren Literaturverzeichnissen}
Verwendet man mehrere Literaturverzeichnisse (\zb getrennt nach Journals, Konferenzen und sonstigen Veröffentlichungen), wird der normale BibTeX-Lauf mit dem Haken bei \enquote{BibTeX in diesem Profil nicht verwenden} ausgeschaltet und es müssen gemäß der Anzahl der Literaturverzeichnisse einmalig im TeXnicCenter unter dem Reiter \enquote{Nachbearbeitung} zusätzliche Bib\TeX-Postprozessoren mit dem Argument \verb+"%bm1"+ für das erste Verzeichnis und \verb+"%bm2"+ für das zweite \usw eingerichtet werden. Für die Postprozessoren kann ebenfalls bibtex8 eingesetzt werden (entsprechend mit \verb+"%tm"+).

\paragraph{Makeindex}
Die Einstellungen für MakeIndex sind zu ändern. Und zwar wird MakeIndex zweimal aufgerufen: Einmal, um das Symbolverzeichnis (die Nomenklatur) zu erstellen (was wir an dieser Stelle eintragen) und einmal, wenn ein Inhaltsverzeichnis (der klassische Index) gewünscht ist. Diesen zweiten Aufruf werden wir später unter \enquote{Nachbearbeitung} eintragen.

\paragraph{Makeindex - Symbolverzeichnis}
Wir passen wieder den Pfad an, wo die \texttt{makeindex.exe} tatsächlich liegt und schreiben bei den Argumenten folgendes rein:\\
\verb+"%tm.nlo" -s nomencl.ist -t  "%tm.nlg" -o "%tm.nls"+

Das sollte dann so ähnlich aussehen wie in \ref{fig:TXCprofile}.

\paragraph{Makeindex - Index}
Wer beabsichtigt auch einen Index erzeugen zu lassen, sollte unter \enquote{Nachbearbeitung} noch einen Eintrag erstellen, der wiederum \texttt{makeindex.exe} aufruft, diesmal aber nur mit dem Argument \verb+"%bm.idx"+.
Man kann die \texttt{nomencl.ist} auch für deutsche Sortierung anpassen, indem man in der Datei zwei Prozentzeichen entfernt. Das ist in der Datei markiert und heißt \enquote{Germans might want to change this and delete the two \%\%}

\paragraph{PDF Viewer}
Auf dem Reiter \enquote{Viewer} wird nun eingestellt, wie TXC mit SumatraPDF kommuniziert. Hier liegt auch die eigentliche Sync\TeX-Funktionalität begraben.

Als Befehlszeile wird folgendes eingetragen:\\
{\tiny \verb+c:\Programme\SumatraPDF\SumatraPDF.exe -reuse-instance -inverse-search "\"c:\Programme\TeXnicCenter\TEXCNTR.EXE\" /ddecmd \"[goto('%f','%l')]'\""+\\}
wobei der Pfad zum SumatraPDF wie auch der Pfad zur TeXnicCenter \texttt{*.exe}-Datei angepasst werden muss.
Unter Windows 7 64bit sieht das dann \zb so aus (natürlich ohne die Zeilenumbrüche):\\
{\scriptsize \begin{verbatim}
C:\Program Files (x86)\SumatraPDF\SumatraPDF.exe
-inverse-search "\"C:\Program Files (x86)\TeXnicCenter2\TeXnicCenter.exe\"
/ddecmd \"[goto('%f','%l')]'\""+\\
\end{verbatim}
}

Bei \enquote{Projektausgabe betrachten} steht als Kommandozeile nur \verb+"%bm.pdf"+ drin.

\enquote{Suche in Ausgabe} wird durch DDE-Befehle gelöst, hier steht\\
\verb+[ForwardSearch("%bm.pdf","%Wc",%l,0,0,1)]+ drin.

\emph{Server} ist \texttt{SUMATRA} mit \emph{Thema} \texttt{control}. Jetzt sind wir auch an dem Punkt, an dem sich die zwei Profile unterscheiden: Beim Projekt-Profil steht im DDE-Befehl \verb+%Wc+
 während beim Einzeldatei-Profil \verb+%nc+ steht.

Bei \enquote{Vor Compilierung schließen} stellen wir auf \enquote{Nicht schließen}. Im Gegensatz zum Adobe Reader (der auch gar kein Sync\TeX\ kann), kann das PDF im Sumatra einfach die ganze Zeit geöffnet bleiben!

Wer unbedingt den Adobe (Acrobat) Reader benutzen will, sollte beachten, dass sich in Version 10 die DDE-Server geändert haben und inwischen acroviewR10 (für den Reader) bzw.\ acroviewA10 (für den vollen Acrobat) lauten.

Geschafft -- das war der schwierigste Teil der Einrichtung.

\subsubsection{Die erste Kompilierung}

Wird das Dokument nun zum ersten Mal kompiliert, dauert das eine Weile, da die ganzen noch fehlenden LaTeX-Pakete während der Kompilierung aus dem Netz geladen und installiert werden. Der erste Kompiliervorgang führt wohl auch noch zu einer Fehlermeldung. Nach dem zweiten Durchlauf (es werden noch die Pakete \texttt{pdfcrop} und \texttt{preview} nachinstalliert) sollte es 0 Fehler geben. Viele Warnungen sind noch kein Grund zur Sorge.

Verwendet man mehrere Literaturverzeichnisse kann es bis zum fünften Durchlauf brauchen, bis alle Literaturreferenzen korrekt aufgelöst sind.

Auch am Ende bleiben bei A5-Kompilierung noch \ca 23 Warnungen übrig. Dagegen kann man im Moment nichts tun, sollte aber auch kein Grund zur Beunruhigung sein.

\subsubsection{Textbausteine}

Es ist recht hilfreich sich bei einem längeren Dokument im TXC eigene Textbausteine zu erschaffen, die man dann einfach einfügen kann. Kandidaten dafür sind \zb \verb+\begin{hidecomment} \end{hidecomment}+ oder \verb+\footnote{\url{ }}+, je nachdem was man eben oft braucht.

\subsubsection{Rechtschreibprüfung in TXC}

TeXnicCenter verwendet die OpenOffice-Wörterbücher. Diese kann man frei herunterladen und nachinstallieren.

{\small
\url{http://wiki.services.openoffice.org/wiki/Dictionaries}}

Wer will, kann auch \texttt{aspell} verwenden, was sich anscheinend bequem aus TXC heraus aufrufen lässt. Hab ich aber noch nicht getestet.

{\tiny
\url{http://raschka.supersized.org/archives/8-Aspell-Rechtschreibkorrektur-mit-der-Latex-IDE-TeXnicCenter-unter-Windows-DE.html}
}

{\small
\url{http://csenk.de/2010/05/14/aspell-und-texniccenter/}
}

\begin{figure}[htb]
\Centering
\includegraphics[width=0.6\textwidth]{images/anleit/sumaeinzel.png}
\caption{TXC-Screenshot der Ausgabeprofile}
\label{fig:TXCprofile}
\end{figure}


\begin{figure}[htb]
\Centering
\includegraphics[width=0.6\textwidth]{images/anleit/txcmakeidx.png}
\caption{TXC-Screenshot der Nachbearbeitungsschritte}
\label{fig:TXCpostproc}
\end{figure}

\begin{figure}[htb]
\Centering
\includegraphics[width=0.6\textwidth]{images/anleit/txcviewer.png}
\caption{TXC-Screenshot der Viewer-Einstellungen}
\label{fig:TXCviewer}
\end{figure}

\subsection{Perl}

Es kann bei der Verwendung von \texttt{pstool} passieren, dass das erzeugte PDF falsch beschnitten wird. Das liegt daran, dass der ersetzte Text in der Regel mehr Platz beansprucht, als die gesetzten Platzhalter. Abhilfe schafft eine \texttt{pstool}-Option, die \texttt{pdfcrop} aufruft. Damit man beim pstool-Paket die Option \texttt{crop=pdfcrop} verwenden kann, muss im System Perl installiert sein, weil das externe Perl-Skript \texttt{pdfcrop} aufgerufen wird (bei Mik\TeX mit dabei). Das sorgt dafür, dass die BoundingBox auch dann korrekt bestimmt wird, wenn durch psfrag-Ersetzungen die Grafik größer wird als sie vorher war.

Es funktioniert nach meinen Tests sowohl das Open-Source StrawberryPerl\footnote{\url{http://strawberryperl.com/}} als auch das für private Nutzung kostenlose aber kommerzielle ActivePerl\footnote{\url{http://www.activestate.com/activeperl}}. Strawberry Perl installiert sich standardmäßig direkt unter dem Wurzelverzeichnis, was meist unerwünscht ist. Gegebenenfalls den Pfad ändern.

Wer kein pstool verwendet (weil er kein psfrag und auch kein matlabfrag verwendet), braucht auch kein Perl zu installieren.

\subsection{Ghostscript}

Bei MikTeX wird eine Sonderversion von Ghostscript mitgeliefert. Ich finde, dass es für jeden, der mit \LaTeX\ arbeitet generell ratsam ist ein aktuelles Ghostscript\footnote{\url{http://www.ghostscript.com/}} mitsamt GSview\footnote{\url{http://pages.cs.wisc.edu/~ghost/}} installiert zu haben, sei es um PDFs mit einem anderen Viewer zu betrachten oder um irgendwelche Konvertierungen von Grafiken per Hand durchzuführen.

\section{Aufbau der Vorlage}

Die Vorlage basiert auf der überaus gelungenen Vorlage von Matthias Pospiech, die schon sehr vieles vorbereitet hat. Auf seiner Homepage\footnote{\url{http://www.matthiaspospiech.de/latex/vorlagen/}} wird sie zum Download angeboten.

Die Vorlage besteht aus mehreren Dateien, die \textbf{Hauptdatei} ist die Datei \datei{LaTeX-Vorlage-IES.tex}. Diese kann umbennant werden, wobei ich sicherheitshalber keine Leerzeichen und keine Umlaute verwenden würde. Unter Windows ist es vermutlich auch ratsam, wenn der Dateiname zusammen mit dem Dateipfad 254 Zeichen nicht überschreitet. Das entstehende PDF heißt genauso wie die Hauptdatei. Die zugehörige TXC-Projektdatei (\texttt{*.tcp}) verweist unter Menü: Projekt, Projekteigenschaften auf die Hauptdatei.

Im Idealfall muss der Benutzer eigentlich nur in der Hauptdatei Änderungen machen. Die Hauptdatei ist kommentiert und unterstützt damit den Benutzer bei der korrekten Handhabung.

Schaut man sich die Hauptdatei an, fällt auf, dass sie vergleichsweise kurz ist. Sie beinhaltet letztlich nur Verweise auf die verwendete Dokumentklasse (inklusive Papierformat und Schriftgröße) und definiert Dokumentstruktur. Alle sonstigen Einstellungen und Inhalte sind in Extradateien ausgelagert. Zu Beginn wird die sehr umfangreiche Präambel eingebunden. Dort werden die ganzen benötigten \LaTeX-Pakete geladen. Bei den Makros werden neue Befehle definiert oder vorhandene umdefiniert. Dann wird die Silbentrennungsdatei eingebunden (dazu später mehr).

Hinweis, wenn man selbst Dateien einbinden will: Benutze \verb+\include+ nur dann, wenn du \emph{weißt}, dass \verb+\input+ nicht reicht.

Dann kommen Titel, Inhaltsverzeichnis, Symbolverzeichnis. Als nächstes werden die eigentlichen Inhaltsdateien eingebunden. Für jedes Kapitel eine. Das muss man nicht tun, aber es verkürzt bei einem langen Dokument den Erstellungsvorgang stark, wenn man \zb nur das aktuelle Kapitel durchnudeln lässt.

Am Ende kommen noch das Literaturverzeichnis sowie Abbildungs- und Tabellenverzeichnis gefolgt von einem Theoremverzeichnis und einem Verzeichnis der Codelistings. Nicht jeder benötigt alles davon. Was man nicht braucht, kann man hier (und nur hier) auskommentieren. Auskommentiert wird mit einem \%-Zeichen.

Die Präambel bindet auch die Schriftartendefinitionen in einer Extradatei ein. Warnung: Schriftauswahl unter \LaTeX und insbesondere der Mathematiksatz ist ein bißchen wie die Hölle auf Erden. Da gibt es zig Codierungen und virtuelle Fonts, die sich die benötigten Zeichen zusammensuchen. Außerdem handhabt jedes Schriftpaket anders, welche Befehle und Zeichen umdefiniert werden. Das Schriftengebilde ist eine relativ fragile Konstruktion. Wer Änderungen vornimmt, sollte wissen was er tut.


\section{Hinweise zum Literaturverzeichnis}

Es gibt ein nicht einfach zu lösendes Dilemma mit LaTeX und BibTeX:

Möglichkeit 1:\\Man macht die LaTeX-Dateien in UTF8, setzt die Option \texttt{utf8} beim \texttt{inputenc}-Paket und kann dann alle Zeichen als Eingabezeichen in den tex-Dateien verwenden. Dann muss man allerdings die bib-Dateien in ANSI lassen und Umlaute wie ein ü so schreiben: \verb+{\"u}+.
Das ist bei der Vorlage Version 1.1 gerade der Fall.

Möglichkeit 2:\\Man beschränkt die LaTeX-Dateien auf beispielsweise \texttt{latin1} oder \texttt{latin9}, setzt die entsprechende \texttt{inputenc}-Option (kann dann nur die darin vorkommenden Zeichen verwenden) und hat dann die Möglichkeit, diese mit BibTeX bzw. BibTeX8 auch zu verwenden. Allerdings ist das wohl auch nur halboffiziell möglich und es gibt keine Garantie, dass es läuft.
So war es bei der Vorlage in Version 1.0.

Beide Lösungen sind nicht das Gelbe vom Ei, aber je nachdem wie es einem lieber ist, kann man sich auch Vorlage 1.1 wieder auf \texttt{latin9} zurückstellen.

Eine Lösung wäre der komplette Verzicht auf BibTeX und Umstieg auf biblatex, aber das ist eher für Version 2.0 der Vorlage angedacht.

Ganz sicher geht Ihr also nur, wenn ihr in Euren \texttt{bib}-Dateien keine Zeichen außerhalb ASCII/ANSI benutzt, sondern Sonderzeichen immer als LaTeX-Code schreibt. 

\section{Funktionen der Vorlage}

Die Vorlage versucht die sprichwörtliche eierlegende Wollmilchsau zu sein. Folgende Dinge sollten funktionieren:

\begin{itemize}
	\item Rastergrafiken in den Formaten PNG, JPG und GIF
	\item Vektorgrafiken in den Formaten PDF und EPS (!)
	\item Bilder nebeneinander, auch als a) und b) Bilder
	\item Stark verbesserter Schriftsatz dank \texttt{microtype}
	\item psfrag-Befehle
	\item Matlab-Interaktion durch Unterstützung für matlabfrag
	\item schöne und flexible Tabellen
	\item TikZ\footnote{\url{http://en.wikipedia.org/wiki/PGF/TikZ}}-Grafiken
	\item Randnotizen (auch Abbildungen)
	\item reichhaltige Auswahl an Schriften im Mathematikmodus
	\item Mehrere Literaturverzeichnisse (mit Backlinks)
	\item Codelistings
	\item Theoremumgebung (Satz, Beweis, Lemma, \dots)
	\item Codekommentare sichtbar/unsichtbar
\end{itemize}

Außerdem sind von Matthias Pospiech (und auch von mir) in der Präambel schon einige weitere Dinge vorbereitet worden.

\subsection{Umschalten zwischen DIN A4 und DIN A5}

Möchte man zwischen DIN A4 (Diplomarbeiten, Probedrucke) und DIN A5 (Dissertation, Endfassung) umschalten, muss man in der Hauptdatei lediglich 4 Dinge ändern:
\begin{enumerate}
	\item In den Optionen der documentclass (praktisch ganz am Anfang) \texttt{paper=a4} bzw. \texttt{paper=a5} setzen
	\item In den Optionen der documentclass \texttt{fontsize=10pt} für DIN A5 und \texttt{fontsize=11pt} für DIN A4 setzen. Bei A5 wäre mir \texttt{fontsize=9pt} zwar lieber, aber KIT Scientific Publishing ist dagegen.
	\item Das passende Titelblatt einbinden indem man \texttt{Titel-A4} bzw \texttt{Titel-A5} einbindet (ca.\ bei Zeile 160)
	\item Die beiden Zeilen mit dem Kommentar "`\texttt{Nur für A4}"' entsprechend ein-/auskommentieren (ca.\ bei Zeile 155). Ohne diese Korrektur würden die Marginalien in A4 ohne Abstand direkt an den Textkörper angefügt.
\end{enumerate}
Eigentlich sollte\texttrademark\ es dann richtig funktionieren.

Es ist jedoch \textbf{Aufgabe des Autors} für Zeilenumbrüche zu sorgen, die zu lange Zeilen durch Spezialelemente verhinden. \LaTeX versucht das automatisch, kann aber natürlich nicht wissen, wo \zb eine Formel umbrochen werden muss. Einige Beispiele sind in der Vorlage zu finden, wo für Copy\&Paste-Zwecke absichtlich in den Rand geschrieben wird.


\subsection{Abkürzungen}
Viele Abkürzungen wie zum Beispiel \etc \zb \usw \ua und im Englischen \ie\ \eg sind schon als extra Befehl vordefiniert: \verb+\etc+ \verb+\usw+ \verb+\zb+ \verb+\ua+ \verb+\ie+ \verb+\eg+. Diese Befehle sind da, weil man im Text sonst immer \verb+usw.\ + mit einem Leerzeichen nach dem Backslash schreiben müsste. Ansonsten markiert der Punkt nämlich ein Satzende und es gibt einen größeren Abstand, der mitten im Satz nichts verloren hat. Deswegen entweder selbst dran denken, nach den Nicht-Satzende-Punkten ein Backslash mit Leer anzuhängen oder die vorgefertigten Befehle benutzen.

\subsection{Bilder einbinden}

Natürlich kann man Bilder einbinden, wie man das schon immer gemacht hat (mit figure und includegraphics). Es gibt aber auch den Befehl \verb+\bild+, der das ganze vereinfacht. Er bekommt sechs Parameter, nämlich den Bild-Pfadnamen, die Beschriftung unter dem Bild, das Referenzierungs-Label, die Bildbreite, und wahlweise die Kurzbeschriftung fürs Abbildungsverzeichnis und die Platzierung. Das erzeugt ein mittiges Bild mit den genannten Daten in einer figure-Gleitumgebung.
Zum Beispiel also so wie hier:\\
{\tiny \verb+\bild{images/jpegbild_Corel24bit4,2,2.jpg}{Bild, eingesetzt mit dem \texttt{bild}-Befehl}{fig:bildbefehl}{0.4\textwidth}{Bildbefehl-Bild}{}+}\\
\bild{images/jpegbild_Corel24bit4,2,2.jpg}{Bild, eingesetzt mit dem \texttt{bild}-Befehl}{fig:bildbefehl}{0.4\textwidth}{Bildbefehl-Bild}{}
Die hintere Klammer ist leer, \dhe dass keine bestimmte Positionierung erfolgt, sondern standardmäßig nach der Reihenfolge htbp (here, top, bottom, page) verwendet wird. Achtung: Wird ein Buchstabe weggelassen, wird diese Positionierung verboten.


\subsection{Bilder im Rand}

Die Vorlage bietet die Möglichkeit, Bilder in den Rand zu setzen. Dies aber bitte nur tun, wenn es unbedingt sein muss. Das Problem ist, dass insbesondere im A5-Druck der Rand dafür eigentlich zu klein ist.
Wenn man es tun will gibt es dafür den Befehl \verb+\randbild+. Dieser hat 5 Parameter: Bild-Pfadname, Kurzbeschriftung (für Abbildungsverzeichnis), Beschriftung, Breite zw. 0 und 1 = 100\% des Randes, Label.

\subsection{Schneller kompilieren}

Es empfiehlt sich, nicht direkt auf dem Netzwerk zu arbeiten, sondern mit einer lokalen Kopie. Diese kann man ja dann abends mit einem Repository im Netzwerk synchronisieren.
Will man speziell ein Kapitel überarbeiten kann man mit dem \verb+\includeonly+-Befehl arbeiten. Damit wird der Kompiliervorgang beschleunigt, weil nur noch dieses Kapitel kompiliert wird. Ein Beispiel ist in der Hauptdatei zu finden.

\section{Wie mache ich \dots ?}

Ganz wichtig: \textbf{Bevor man aus dem Internet irgendwelche Tipps von vor fünf Jahren oder älter ausgräbt, hilft manchmal eine Suche in der Präambel nach geeigneten Stichworten!} oder ein Blick in den Abschnitt \ref{sec:tipstricks} Tips und Tricks in dieser Anleitung.

Generell sind Tipps aus dem Internet immer mit Vorsicht zu genießen. Meistens sind sie schlicht veraltet, manchmal einfach nur falsch aber manchmal funktionieren sie auch, machen an anderer Stelle aber Dinge kaputt. Hingegen sind Tips von \LaTeX-Gurus wie \zB Ulrike Fischer, Heiko Oberdiek, Markus Kohm, Axel Sommerfeldt und Herbert Voss natürlich per definitionem richtig \smiley.

Das sich an die Anleitung anschließende Beispieldokument beinhaltet schon sehr viele Beispiele die nach bestem Wissen und Gewissen aktuelles und sauberes \LaTeX\ darstellen. Verbesserungsvorschläge bitte an mich. Die Beispiele sind so gewählt, dass man durch Copy\&Paste den Code einfach übernehmen kann.

\subsection{Was man tunlichst lassen sollte}

In l2tabu\footnote{\url{ftp://ftp.dante.de/tex-archive/info/l2tabu/german/l2tabu.pdf}} stehen einige Sachen drin, die man nicht machen sollte. Bitte lest dieses Dokument durch, bevor ihr euch Dinge angewöhnt, die böööse Tabu sind. Zum Beispiel wie man eineinhalbfachen Zeilenabstand \emph{nicht} macht.

Zu den Dingen, die man nicht machen sollte, zählen auch einige plain\TeX-Befehle. Das sind Befehle, die nicht aus \LaTeX\ selbst stammen, sondern aus dem \TeX-Unterbau, den \LaTeX\ verwendet. \Dhe man greift an \LaTeX\ vorbei auf die Interna zu. Das ist nicht per se schlimm, hat aber oft seltsame Effekte, die mit obskuren Gegenmaßnahmen gekontert werden \usw.  Besonders oft sieht man plain\TeX-Befehle bei Tips im Internet zu Mathesachen. \marginnote{\textbf{Verbotene Befehle}} \enquote{\textbf{Verboten}} sind nur Befehle, wie \verb+\over+ \verb+\atop+ \verb+\above+ \verb+\choose+ für die es mit \verb+\frac+ \verb+\stackrel+ \verb+\substack+ \verb+\overset+ und \verb+\binom+ sichere \LaTeX-Alternativen gibt.

Bei Dissertationen, die im \sout{Univerlag} KIT Scientific Publishing gedruckt werden sollen, darf keine Transparenz vorhanden sein. Egal, wo im Dokument (auch in Grafiken). Das sieht der Teil des PDF/A-Standards vor, an den sich \sout{der Univerlag} KIT Scientific Publishing hält. Eine in Rastergrafiken (!) fertig gerenderte Transparenz ist natürlich möglich, weil diese nicht mehr als solche erkennbar ist.

Wichtig ist weiterhin, dass alle Schriften eingebettet werden, insbesondere in Grafiken aus Drittprogrammen (Inkscape, CorelDraw, Illustrator, etc.).

Ebenso dürfen keine bunten Textlinks verwendet werden, nur nicht-druckbare Kästen um die Links herum. Die	Lösung ist: Bei den Optionen des \texttt{hyperref}-Pakets im Befehl \texttt{hypersetup} die Option \texttt{colorlinks=false} setzen. Das findet man in der Präambel. Die Kästen werden vom SumatraPDF nicht angezeigt, vom Adobe Reader schon.

\section{Titel, Sprache, Deckblatt}

\subsection{Titel, Verfasser und Datum}

Am Ende der Datei \texttt{newcommands.tex} werden Befehlsvariablen für Titel, Autor \usw definiert, die auf der Titelseite verwendet werden. Daher die Informationen zu Titel, Autor, Datum und Betreuern nur in der Datei \texttt{newcommands.tex} anpassen.

\subsection{Einstellung der Sprache}

Am Ende der Datei \texttt{preambel-commands.tex} ist die Variable \texttt{iesenglishs} zu finden. Sie kontrolliert, ob die Sprache des Dokuments Englisch (true) oder Deutsch (false) ist.
Der erste Lauf nach dem Umstellen der Sprache wird einen Kompilierfehler im Babel-Paket haben. Einfach ein zweites Mal durchkompilieren lassen.

\subsection{IOSB-Kooperation}

Am Ende der Datei \texttt{preambel-commands.tex} ist die Variablen \texttt{useiosblogo} zu finden. Sie kontrolliert, ob das Logo des Fraunhofer IOSB aufs Deckblatt kommt (true) oder nicht (false).

\subsection{Typ der Arbeit}

In der Datei \texttt{Titel.tex} sind die Titelzeilen für Dissertation, Diplomarbeit oder Studienarbeit vorgefertigt. Beim zutreffenden Element bitte die Kommentarzeichen entfernen und bei den nicht zutreffenden Elementen die Kommentarzeichen hinzufügen oder belassen. Außer genannte Kommentarzeichen nichts in die \texttt{Titel.tex} eintragen!

\subsection{MUSTER}

Möchte man einen schrägen MUSTER-Schriftzug über den Seiten haben, weil das Dokument noch nicht fertig ist, kann das am Ende der Datei \texttt{preambel-commands.tex} mit der Variable \texttt{printMuster} einstellen.

%\bibliographystyle{bib/bst/AlphaDINFirstName}
%\bibliography{bib/BibtexDatabase}

\section{Tips und Tricks}
\label{sec:tipstricks}

\subsection{Kompilierfehler}
Wenn man einen Kompiliervorgang manuell abgebrochen hatte, gibt es beim nächsten Versuch meistens einen Fehler. Dann einfach nochmal kompilieren, dann geht er weg. Manchmal (eher selten) passiert das wohl auch einfach so ohne manuellen Abbruch. Lösung ist dann die gleiche.

\subsection{Erzwungenes embedding von base14 Schriften unter Windows}
Oft wird gefordert, die eigentlich standardisierten und deshalb standardmäßig weggelassenen PostScript-Schriften doch einzubetten worüber sich alle sehr freuen.
Das Problem gliedert sich in zwei Teile: Das Dokument muss die Schriften eingebettet haben aber auch alle Grafiken, die Schriften verwenden.

\subsubsection{Konfiguration von Visio}
Lösung --> Beim Abspeichern PDF/A-Kompatibilität anhaken. (Achtung: Transparenz geht kaputt)

\subsubsection{Konfiguration von pdfLaTeX}

Möchte man grundsätzlich die Base14-Schriften einbetten, konfiguriert man pdfLaTeX wie folgt:

Eine Shell aufmachen und

\texttt{initexmf --edit-config-file updmap}

schreiben.
Shell offen lassen und dann in dem sich öffnenden Notepad-Fenster folgendes reinkopieren:

{\scriptsize
\begin{verbatim}
# dvipsDownloadBase35
#
# Should dvips (by default) download the standard 35 LaserWriter fonts
# with the document (then set dvipsDownloadBase35 true) or should these
# fonts be used from the ps interpreter / printer?
# Whatever the default is, the user can override it by specifying
# dvips -Pdownload35 ... resp. dvips -Pbuiltin35 ... to either download
# the LW35 fonts resp. use the build-in fonts.
#
# Valid settings are true / false:
dvipsDownloadBase35 true

#
# pdftexDownloadBase14
#
# Should pdftex download the base 14 pdf fonts? Since some configurations
# (ps / pdf tools / printers) use bad default fonts, it is safer to download
# the fonts. The pdf files will get bigger, though.
# Valid settings are true (download the fonts) or false (don't download
# the fonts).
pdftexDownloadBase14 true
\end{verbatim}
}

Dann speichern und schließen. Wieder zur offenen Shell und dort

\texttt{initexmf --mkmaps --admin --force -u --verbose}

(sicher ist sicher) und danach einfach noch ein

\texttt{updmap}

eingeben.


\subsection{PDF Version 1.4 warning}

Oft gibt es im Zusammenhang mit pstool eine Warnung wegen PDF-Version 1.4 wo wir aber doch lieber 1.3 wollen damit alle (\zB KIT Scientific Publishing) zufrieden sind und wir weniger Ärger haben. Da PDF 1.3 keine Transparenzen beherrscht, lassen sich die ganzen Transparenzprobleme vermeiden, wenn man gleich per PDF 1.3 gar keine Transparenz haben kann.

Die pstool-Doku
\url{http://sunsite.informatik.rwth-aachen.de/ftp/pub/mirror/ctan/macros/latex/contrib/pstool/pstool.pdf}
sagt:

{\scriptsize
\begin{verbatim}
The command line options passed to each program of the auxiliary processing
can be changed with the following package options:
[latex-options=...]
[dvips-options=...]
[ps2pdf-options=...] and,
[pdfcrop-options=...] (if applicable).
For the most part these will be unnecessary, although passing the correct
options to ps2pdf can sometimes be a little obscure. For example, I use the
following for generating figures in my thesis:
ps2pdf-options={"-dPDFSETTINGS=/prepress"}
This forces the `base fourteen' fonts to be embedded within the individual
figure files, without which some printers and pdf viewers have trouble with
the textual labels. In fact, from v1.3 of pstool, this option is now the default.
Note that subsequent calls to [ps2pdf-options=...] will override the pstool
default; use ps2pdf-options={} to chose ps2pdf's defaults if necessary.
\end{verbatim}
}


Das heißt, wir brauchen bei den ps2pdf-Paketoptionen (denn mit ps2pdf wird ja vermutlich das PDF erzeugt) das hier mit dazuschreiben

-dCompatibilityLevel=1.3

Das behauptet zumindest die Doku von ps2pdf:

\url{http://www.ghostscript.com/doc/9.05/Ps2pdf.htm}

Dann sollten die erzeugten PDFs gleich mal nur in Version 1.3 auftreten.

ACHTUNG:
Da ps2pdf unter Windows eine Batch-Datei ist, gibt es Probleme, da hier statt = ein \# verwendet werden muss. Details siehe:

\url{http://zkwarl.blogspot.com/2006/12/ps2pdf-tip-how-to-get-around-broken.html}

%I was having issue submitting an IEEE paper as they were saying that my fonts, Times-Roman, Times-Italic etc were not being embedded. The solution is to use the following command line to ps2pdf: 
%
%\verb+ps2pdf -dEmbedAllFonts#true -dSubsetFonts#true -dPDFSETTINGS#/prepress %1.ps %1.pdf >> create_pdf.log+
%
%\verb+ps2pdf -dCompatibility#1.3 input.eps output.pdf+
%

Um das hinzubekommen, werden in der Präambel Klimmzüge gemacht, wo direkt auf die Paketoptionen von \texttt{pstool} zugegriffen wird. Das ist zwar nicht schön, funktioniert aber. Der Autor von \texttt{pstool} wurde aber informiert und vielleicht fixt er das ja mal für Windows.

Nur als Hinweis falls man es mal braucht: Bei epstopdf kann man es so mitgeben

\verb+epstopdf --gsopt=-dCompatibilityLevel#1.3 input.eps+


\subsection{CheckedBox warning}
Die Pakete wasysym und \texttt{marvosym} definieren beide den Befehl "CheckedBox". Abhilfe: Entweder \texttt{marvosym} nicht verwenden (wenn man die enthaltenen Symbole eh nicht braucht) oder in der \texttt{marvosym.sty} die Zeile mit \verb+\newcommand\CheckedBox+ auskommentieren. Vermutlich hält das aber nur, bis das \texttt{marvosym}-Paket das nächste Update erhält. Diese Warnung ist aber nicht wirklich schlimm. Und wenn man keine Symbole aus \texttt{marvosym} verwendet, kann man das Laden von \texttt{marvosym} (usepackage) auch auskommentieren.


\subsection{I can't write on file (xyz)}
Bei dem Fehler
\verb+! I can't write on file (xyz)+

kann es helfen, folgende Umgebungsvariable im System zu setzen:

\verb+set MIKTEX_ALLOWUNSAFEOUTPUTFILES=1+
bzw.\ besser dauerhaft in den Windows-Umgebungsvariablen (ohne den \texttt{set}-Befehl).


\subsection{Inkscape und EPS}
Wer eine zu neue Inkscape-Version verwendet, kann mit einem Matlab-Script die EPS-Files nachbearbeiten lassen, dass psfrag/pstool funktioniert:
\enquote{Make Inkscape PostScript files compatible with psfrag in LaTeX} unter
\url{http://www.mathworks.com/matlabcentral/fileexchange/29649-make-inkscape-postscript-files-compatible-with-psfrag-in-latex}.

\subsection[LaTeX Text über Bild schreiben]{\LaTeX Text über Bild schreiben}

Mit dem \texttt{overpic}-Paket kann man LaTeX über Bilder legen.

\begin{quote}
Dieses kleine LaTeX-Paket definiert die overpic-Umgebung, welche eine
Kombination von picture-Umgebung und includegraphics-Befehl ist. Die
resultierende picture-Umgebung hat dieselbe Groesse wie die eingefuegte Grafik.
Jetzt ist es einfach moeglich beliebige LaTeX-Ausgaben auf das Bild zu
positionieren. Ein Gitter kann zur Hilfe verwendet werden.
\end{quote}

\subsection{Inkompatibilitäten}
Diese Vorlage funktioniert nicht zusammen mit folgenden Paketen:
\begin{itemize}
	\item \texttt{commath}-Paket
	\item \texttt{enquote}-Paket, kollidiert mit \texttt{pstool}
\end{itemize}

